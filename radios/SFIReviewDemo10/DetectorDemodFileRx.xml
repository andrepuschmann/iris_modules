<?xml version="1.0" encoding="utf-8" ?> 

<softwareradio name="Detector and Demodulator">

	<controller class="signaturedetection" />

    <engine name="pnengine1" class="pnengine">
 
        <component name="usrpuhdrx1" class="usrpuhdrx">
			<parameter name="address" value="192.168.10.2"/>
			<parameter name="rate" value="500000"/>
			<parameter name="frequency" value="5000030000"/>
			<parameter name="gain" value="30"/>
			<parameter name="outputblocksize" value="16384"/>
			<port name="output1" class="output"/>
    	</component>
<!--       
        <component name="filerawwriter1" class="filerawwriter">
			<parameter name="filename" value="capture.bin"/>
			<port name="input1" class="input"/>
      	</component>

	<component name="filerawreader1" class="filerawreader">
	            <parameter name="fileName" value="capture.bin"/>
	            <parameter name="blockSize" value="16384"/>
	            <parameter name="dataType" value="complex<float>"/>
	            <port name="output1" class="output"/>
        </component>
--> 
  
  	<component name="sigdetect1" class="cyclosignaturedetector">
		    <parameter name="debug" value="false"/>
		    <parameter name="fftsize" value="1024"/>
		    <parameter name="cyclicfrequency" value="31250"/>
		    <parameter name="bandwidth" value="2000000"/>
		    <parameter name="numwindows" value="60"/>
		    <parameter name="freqsmoothingorder" value="4"/>
		    <parameter name="detectthreshold" value="0.5"/>
		    <parameter name="triggerreconfig" value="false"/>
		    <port name="input1" class="input"/>
		    <port name="output1" class="output"/>
        </component>
        
    </engine>    
        
    <engine name="pnengine2" class="pnengine">
    
        <component name="fullcyclobwdemodulator1" class="fullcyclobwdemodulator">
			<parameter name="debug" value="false"/>	
			<parameter name="numunits" value="8"/>
			<parameter name="detectthreshold" value="0.85"/>
			<port name="input1" class="input"/>
			<port name="output1" class="output"/>
        </component>

		<component name="filerawwriter1" class="filerawwriter">
			<parameter name="filename" value="pride_out.txt"/>
			<port name="input1" class="input"/>
		</component>
     
    </engine>

	<link source="usrpuhdrx1.output1" sink="sigdetect1.input1" />
	<link source="sigdetect1.output1" sink="fullcyclobwdemodulator1.input1" />
	<link source="fullcyclobwdemodulator1.output1" sink="filerawwriter1.input1" />
 
	
</softwareradio>
